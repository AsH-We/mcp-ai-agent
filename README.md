# AI Agent с интеграцией MCP (Model Context Protocol)

Это реализация интеллектуального агента на базе **LangGraph**, который взаимодействует с внешними данными через **MCP серверы**. Проект включает в себя автоматизацию работы с каталогом товаров и систему заказов.

---

## Архитектура системы

Агент построен по принципу разделения ответственности: управляющая логика отделена от инструментов работы с данными.

* **FastAPI**: Внешний интерфейс для приема запросов.
* **LangGraph**: Граф состояний, управляющий циклом мышления агента.
* **MCP Servers**: Независимые сервисы (Продукты и Заказы), работающие через `stdio`.
* **SQLite**: Надежное хранилище данных (реализовано как бонусное задание).

---

## Быстрый старт

### Запуск через Docker Compose (рекомендуется)

Проект полностью настроен для запуска в контейнерах:

1.  **Соберите и запустите проект:**
    ```bash
    docker-compose up --build
    ```
2.  **Доступ к API:**
    Агент будет доступен по адресу: `http://localhost:8000`
3.  **Документация:**
    Интерактивная панель управления (Swagger): [http://localhost:8000/docs](http://localhost:8000/docs)

---

## Примеры запросов

Агент понимает естественный язык и автоматически выбирает нужный инструмент.

### Работа с продуктами
**Запрос:** `"Добавь новый продукт: Мышка, цена 1500, категория Электроника"`
* *Действие:* Агент вызывает инструмент `add_product` через MCP сервер.

### Аналитика и Статистика
**Запрос:** `"Какая средняя цена товаров в базе?"`
* *Действие:* Агент запрашивает данные у сервера продуктов и форматирует ответ в человекочитаемый вид.

### Кастомные инструменты
**Запрос:** `"Посчитай скидку 15% на товар с ID 1"`
* *Действие:* Агент получает цену товара через MCP и применяет логику кастомного инструмента `calculate_discount`.

---

## Технологический стек

- **Python 3.11+**
- **FastAPI**: Веб-фреймворк.
- **LangGraph & LangChain**: Логика агента.
- **FastMCP**: Реализация протокола MCP.
- **aiosqlite**: Асинхронная работа с БД.
- **Docker & Docker Compose**: Контейнеризация.

---

## Структура проекта

```text
├── agent/            # Логика агента и LangGraph
├── servers/          # MCP серверы (продукты и заказы)
├── data/             # Персистентное хранилище
├── main.py           # Точка входа FastAPI
├── Dockerfile        # Инструкции по сборке образа
└── docker-compose.yml# Конфигурация всей системы